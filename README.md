## Chapter Two: MVP
In this chapter I will optimize the billing service algorithm, the current process works well and solve the problem, but in at certain quantity of invoices to charge, the process will take too long to charge all records. I also need to test the algorithm in a way near to the reality and now our billing service is mocked and the database is located on the same environment as the application, therefore on production usually we have a remote database that have some latency between read and write operations. With that said, I will mock some delay inside this two services, to emulate this environment. I also will measure the algorithm efficiency during this development, to know that I am going on the right way.

## Resume of chapter

## Developing

Requirements:
- \>= Java 11 environment

Open the project using your favorite text editor. If you are using IntelliJ, you can open the `build.gradle.kts` file and it is gonna setup the project in the IDE for you.

### Building

```
./gradlew build
```

### Running

There are 2 options for running Anteus. You either need libsqlite3 or docker. Docker and Docker Compose is easier but requires some docker knowledge. We do recommend docker though.

*Running Natively*

Native java with sqlite (requires libsqlite3):

If you use homebrew on MacOS `brew install sqlite`.

```
./gradlew run
```

*Running through docker*

Install docker, docker-compose and make for your platform

```
make start      # to starts the application
make stop      # to stop the application
```

### App Structure
The code given is structured as follows. Feel free however to modify the structure to fit your needs.
```
â”œâ”€â”€ buildSrc
|  | gradle build scripts and project wide dependency declarations
|  â”” src/main/kotlin/utils.kt 
|      Dependencies
|
â”œâ”€â”€ pleo-antaeus-app
|       main() & initialization
|
â”œâ”€â”€ pleo-antaeus-core
|       This is probably where you will introduce most of your new code.
|       Pay attention to the PaymentProvider and BillingService class.
|
â”œâ”€â”€ pleo-antaeus-data
|       Module interfacing with the database. Contains the database 
|       models, mappings and access layer.
|
â”œâ”€â”€ pleo-antaeus-models
|       Definition of the Internal and API models used throughout the
|       application.
|
â””â”€â”€ pleo-antaeus-rest
        Entry point for HTTP REST API. This is where the routes are defined.
```

### Main Libraries and dependencies
* [Exposed](https://github.com/JetBrains/Exposed) - DSL for type-safe SQL
* [Javalin](https://javalin.io/) - Simple web framework (for REST)
* [kotlin-logging](https://github.com/MicroUtils/kotlin-logging) - Simple logging framework for Kotlin
* [JUnit 5](https://junit.org/junit5/) - Testing framework
* [Mockk](https://mockk.io/) - Mocking library
* [Sqlite3](https://sqlite.org/index.html) - Database storage engine

Happy hacking ğŸ˜!
